## -*- text -*- #############################################################
#								            #
# Makefile for the Bash versions of the GNU Readline and History Libraries. #
#								            #
#############################################################################

# Copyright (C) 1994-2012 Free Software Foundation, Inc.

#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#   (at your option) any later version.

#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.

#   You should have received a copy of the GNU General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.

PACKAGE = @PACKAGE_NAME@
VERSION = @PACKAGE_VERSION@

PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_STRING = @PACKAGE_STRING@
PACKAGE_VERSION = @PACKAGE_VERSION@

srcdir = @srcdir@
VPATH = @srcdir@
topdir = @top_srcdir@
BUILD_DIR = @BUILD_DIR@

datarootdir = @datarootdir@

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@

CXX = @CXX@
RANLIB = @RANLIB@
AR = @AR@
ARFLAGS = @AR_FLAGS@
RM = rm -f
CP = cp
MV = mv

SHELL = @MAKE_SHELL@

# Programs to make tags files.
ETAGS = etags -tw
CTAGS = ctags -tw

DEBUG = @DEBUG@

CXXFLAGS = @CXXFLAGS@
LOCAL_CFLAGS = @LOCAL_CFLAGS@ ${DEBUG}
CPPFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@

DEFS = @DEFS@
LOCAL_DEFS = @LOCAL_DEFS@

INCLUDES = -I. -I$(BUILD_DIR) -I$(topdir) -I$(topdir)/lib

CCFLAGS = $(DEFS) $(LOCAL_DEFS) $(APP_CFLAGS) $(CPPFLAGS) ${INCLUDES} \
	  $(LOCAL_CFLAGS) $(CXXFLAGS) ${ADDON_CXXFLAGS}

.c.o:
	${RM} $@
	$(CXX) -x c++ -c $(CCFLAGS) $<

# The name of the main library target.
LIBRARY_NAME = libreadlinecpp.a

# The C code source files for this library.
CSOURCES = $(srcdir)/readline.c $(srcdir)/funmap.c $(srcdir)/keymaps.c \
	   $(srcdir)/vi_mode.c $(srcdir)/parens.c $(srcdir)/rltty.c \
	   $(srcdir)/complete.c $(srcdir)/bind.c $(srcdir)/isearch.c \
	   $(srcdir)/display.c $(srcdir)/signals.c $(srcdir)/emacs_keymap.c \
	   $(srcdir)/vi_keymap.c $(srcdir)/util.c $(srcdir)/kill.c \
	   $(srcdir)/undo.c $(srcdir)/macro.c $(srcdir)/input.c \
	   $(srcdir)/callback.c $(srcdir)/terminal.c \
	   $(srcdir)/history.c $(srcdir)/histsearch.c $(srcdir)/histexpand.c \
	   $(srcdir)/histfile.c $(srcdir)/nls.c $(srcdir)/search.c \
	   $(srcdir)/shell.c $(srcdir)/tilde.c \
	   $(srcdir)/text.c $(srcdir)/misc.c \
	   $(srcdir)/colors.c $(srcdir)/parse-colors.c \
	   $(srcdir)/mbutil.c

# The header files for this library.
HSOURCES = readline.h rldefs.h chardefs.h history.h \
	   posixstat.h posixdir.h tilde.h rlconf.h rltty.h \
	   tcap.h rlprivate.h rlmbutil.h colors.h parse-colors.h

HISTOBJ = history.o histexpand.o histfile.o histsearch.o shell.o mbutil.o
TILDEOBJ = tilde.o
COLORSOBJ = colors.o parse-colors.o
OBJECTS = readline.o vi_mode.o funmap.o keymaps.o parens.o search.o \
	  rltty.o complete.o bind.o isearch.o display.o signals.o \
	  util.o kill.o undo.o macro.o input.o callback.o terminal.o \
	  text.o nls.o misc.o $(HISTOBJ) $(TILDEOBJ) $(COLORSOBJ)

# The texinfo files which document this library.
DOCSOURCE = doc/rlman.texinfo doc/rltech.texinfo doc/rluser.texinfo
DOCOBJECT = doc/readline.dvi
DOCSUPPORT = doc/Makefile
DOCUMENTATION = $(DOCSOURCE) $(DOCOBJECT) $(DOCSUPPORT)

SUPPORT = Makefile ChangeLog $(DOCSUPPORT) examples/[-a-z.]*

SOURCES  = $(CSOURCES) $(HSOURCES) $(DOCSOURCE)

THINGS_TO_TAR = $(SOURCES) $(SUPPORT)

INSTALLED_HEADERS = readline.h chardefs.h history.h tilde.h \
		    rlconf.h

##########################################################################

all: libreadlinecpp.a libhistorycpp.a

libreadlinecpp.a: $(OBJECTS)
	$(RM) $@
	$(AR) $(ARFLAGS) $@ $(OBJECTS)
	-test -n "$(RANLIB)" && $(RANLIB) $@

libhistorycpp.a: $(HISTOBJ)
	$(RM) $@
	$(AR) $(ARFLAGS) $@ $(HISTOBJ)
	-test -n "$(RANLIB)" && $(RANLIB) $@

documentation: force
	test -d doc || mkdir doc
	-( cd doc && $(MAKE) $(MFLAGS) )

force:

install:
	@echo "This version of the readline library should not be installed."

uninstall:
	@echo "This version of the readline library should not be installed."

TAGS:	force
	$(ETAGS) $(CSOURCES) $(HSOURCES)

tags:	force
	$(CTAGS) $(CSOURCES) $(HSOURCES)

clean:	force
	$(RM) $(OBJECTS) *.a
	-( cd doc && $(MAKE) $(MFLAGS) $@ )

mostlyclean: clean
	-( cd doc && $(MAKE) $(MFLAGS) $@ )

distclean maintainer-clean: clean
	-( cd doc && $(MAKE) $(MFLAGS) $@ )
	$(RM) Makefile
	$(RM) TAGS tags

# Dependencies
bind.o: posixstat.h
bind.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
bind.o: readline.h chardefs.h tilde.h
bind.o: history.h
callback.o: rlconf.h
callback.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
callback.o: readline.h chardefs.h tilde.h
complete.o: posixdir.h posixstat.h
complete.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
complete.o: readline.h chardefs.h tilde.h
complete.o: colors.h
display.o: posixstat.h
display.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
display.o: tcap.h
display.o: readline.h chardefs.h tilde.h
display.o: history.h
funmap.o: readline.h chardefs.h tilde.h
funmap.o: rlconf.h rlshell.h
funmap.o: ${BUILD_DIR}/config.h
histexpand.o: history.h rlshell.h
histexpand.o: ${BUILD_DIR}/config.h
histfile.o: history.h rlshell.h
histfile.o: ${BUILD_DIR}/config.h
history.o: history.h rlshell.h
history.o: ${BUILD_DIR}/config.h
histsearch.o: history.h rlshell.h
histsearch.o: ${BUILD_DIR}/config.h
input.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
input.o: readline.h chardefs.h tilde.h
isearch.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
isearch.o: readline.h chardefs.h tilde.h
isearch.o: history.h
keymaps.o: emacs_keymap.c vi_keymap.c
keymaps.o: chardefs.h rlconf.h rlshell.h
keymaps.o: readline.h chardefs.h tilde.h
keymaps.o: ${BUILD_DIR}/config.h
kill.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
kill.o: readline.h chardefs.h tilde.h
kill.o: history.h
macro.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
macro.o: readline.h chardefs.h tilde.h
macro.o: history.h
mbutil.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlmbutil.h rlshell.h
mbutil.o: readline.h chardefs.h
misc.o: readline.h chardefs.h tilde.h
misc.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
misc.o: history.h
nls.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
nls.o: readline.h chardefs.h tilde.h
nls.o: history.h
parens.o: rlconf.h rlshell.h
parens.o: ${BUILD_DIR}/config.h
parens.o: readline.h chardefs.h tilde.h
readline.o: readline.h chardefs.h tilde.h
readline.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
readline.o: history.h
readline.o: posixstat.h
rltty.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
rltty.o: rltty.h
rltty.o: readline.h chardefs.h tilde.h
search.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
search.o: readline.h chardefs.h tilde.h
search.o: history.h
shell.o: ${BUILD_DIR}/config.h rlshell.h
signals.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
signals.o: readline.h chardefs.h tilde.h
signals.o: history.h
terminal.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
terminal.o: tcap.h
terminal.o: readline.h chardefs.h tilde.h
terminal.o: history.h
text.o: readline.h chardefs.h tilde.h
text.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
text.o: history.h
rltty.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
tilde.o: ${BUILD_DIR}/config.h rlshell.h
tilde.o: tilde.h
undo.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
undo.o: readline.h chardefs.h tilde.h
undo.o: history.h
util.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
util.o: readline.h chardefs.h tilde.h
vi_mode.o: rldefs.h ${BUILD_DIR}/config.h rlconf.h rlshell.h
vi_mode.o: readline.h chardefs.h tilde.h
vi_mode.o: history.h

colors.o: ${BUILD_DIR}/config.h colors.h
colors.o: readline.h chardefs.h tilde.h rlshell.h
colors.o: rlconf.h
colors.o: posixstat.h
parse-colors.o: ${BUILD_DIR}/config.h colors.h parse-colors.h
parse-colors.o: rldefs.h rlconf.h rlshell.h
parse-colors.o: readline.h chardefs.h tilde.h

bind.o: rlprivate.h
callback.o: rlprivate.h
complete.o: rlprivate.h
display.o: rlprivate.h
input.o: rlprivate.h
isearch.o: rlprivate.h
kill.o: rlprivate.h
macro.o: rlprivate.h
mbutil.o: rlprivate.h
misc.o: rlprivate.h
nls.o: rlprivate.h
parens.o: rlprivate.h
readline.o: rlprivate.h
rltty.o: rlprivate.h
search.o: rlprivate.h
signals.o: rlprivate.h
terminal.o: rlprivate.h
text.o: rlprivate.h
undo.o: rlprivate.h
util.o: rlprivate.h
vi_mode.o: rlprivate.h
colors.o: rlprivate.h
parse-colors.o: rlprivate.h

complete.o: rlmbutil.h
display.o: rlmbutil.h
histexpand.o: rlmbutil.h
input.o: rlmbutil.h
isearch.o: rlmbutil.h
mbutil.o: rlmbutil.h
misc.o: rlmbutil.h
readline.o: rlmbutil.h
search.o: rlmbutil.h
text.o: rlmbutil.h
vi_mode.o: rlmbutil.h
colors.o: rlmbutil.h
parse-colors.o: rlmbutil.h

colors.o: colors.c
parse-colors.o: parse-colors.c

histexpand.o: histexpand.c
histfile.o: histfile.c
history.o: history.c
histsearch.o: histsearch.c
